<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empowered Safety</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

     <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface@0.0.7"></script>
    
</head>
<body>
    <div class="container">

        <!-- Emergency Contacts Section (HIGHEST PRIORITY - AT TOP) -->
        <i class="fa-solid fa-bell siren-icon"></i>
        <h2>Emergency Contacts</h2>

        <div class="input-group">
            <input type="text" id="contactName" placeholder="Enter Contact Name" />
            <input type="text" id="contactNumber" placeholder="Enter Emergency Contact Number (with +91)" />
            <button id="addContactBtn">+ Add Contact</button>
        </div>

        <ul id="contactList"></ul>

        <!-- SOS Buttons -->
        <button class="sos-btn" onclick="requestLocation()">âš  Send SOS to Contacts</button>
        <button class="police-btn" onclick="alertPolice()">ğŸš“ Alert Nearest Police</button>

        <!-- Voice Activation Section -->
        <div class="voice-section">
            <h2>ğŸ™ï¸ Voice Activation</h2>
            <p>Say "help", "emergency", or "stop"</p>
            <button id="startBtn" class="voice-btn">Start Listening</button>
            <p id="statusMessage" class="status-message"></p>
        </div>

        <!-- Health Monitoring Section with REAL Heart Rate Detection -->
        <div class="health-section">
            <h2>ğŸ’“ Heart Rate Monitor</h2>
            <p style="font-size: 14px; opacity: 0.8;">Place your forehead in the camera frame</p>
            
            <button class="scan-btn" id="startHRBtn" onclick="startHeartRateDetection()">
                ğŸ©º Start Heart Rate Scan
            </button>
            <button class="scan-btn" id="stopHRBtn" onclick="stopHeartRateDetection()" style="display:none; background: #666;">
                â¹ Stop Scan
            </button>
            
            <!-- Video preview for heart rate detection -->
            <video id="hrVideo" autoplay playsinline style="display:none; width: 100%; max-width: 320px; border-radius: 10px; margin: 10px auto;"></video>
            <canvas id="hrCanvas" style="display:none;"></canvas>
            
            <!-- Results display -->
            <div class="health-results" id="healthResults" style="display:none;">
                <div style="font-size: 48px; font-weight: bold; color: #ff4444; margin: 20px 0;">
                    <span id="heartRate">--</span> <span style="font-size: 24px;">BPM</span>
                </div>
                <p style="font-size: 14px; opacity: 0.9;">
                    Status: <span id="hrStatus">Measuring...</span>
                </p>
                <p id="sosWarning" style="color: #ffaa00; font-weight: bold;"></p>
            </div>
        </div>

    </div>

    <!-- Link JS file -->
    <script src="script.js"></script>
</body>
</html>